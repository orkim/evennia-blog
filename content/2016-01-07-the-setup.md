Title: The Setup
Date: January 7, 2016
Author: orkim
Category: Evennia
Status: Draft

## Intro

OK, it is time to get serious. I mean really serious! I need to get an
environment set up to do some serious work. Did I mention that this is serious?

I'm a big fan of lists, so I'm going to make one to outline all the things I'll
need.

 * Server - Linux; [Debian](http://www.debian.org) or
   [Ubuntu](http://www.ubuntu.com) will do!
 * Terminal Multiplexer (optional) - [tmux](https://tmux.github.io/) or
   [screen](https://www.gnu.org/software/screen/)
 * Editor - [vim](http://www.vim.org)
 * [git](https://git-scm.com/) - both for Evennia itself, and our game.
 * [Python](http://www.python.org/) - Alternatively
   [IPython](http://www.ipython.org) or [PyPy](http://www.pypy.org/).
 * [virtualenv](https://virtualenv.pypa.io/en/latest/) - for multiple python
   environments.
 * [Evennia](http://www.evennia.com/) - Duh!
 * Mud Client - [tintin++](http://tintin.sourceforge.net/) or an alternative.

The versions available from the distributions repositories are recent enough
for me. A few apt-get commands later and I have got them installed and ready to
begin work.

You might take note that there is a pretty decent amount of software tools
listed above. I really can't stress enough the importance of having a good
understanding of your tools. I've spent many days committing vim commands to
memory, installing/configuring/changing vim plug ins, and playing in my vimrc
file. I've learned to get the muscle memory of tmux commands burned into my
brain.  And "Python" is a whole subject into itself. Take your time, build up
an understanding of each tool and grow with them. Keep growing with them! As
you are more and more comfortable with each of your tools you will become much
more efficient.

## About Evennia Documentation

If you haven't already seen the [Evennia
documentation](https://github.com/evennia/evennia/wiki) you should go check it
out. It's probably one of the best documented projects around. There are plenty
of comments in the source code itself, there is a wiki *FULL* of information to
go with it, an active [mailing
list](https://groups.google.com/forum/#%21forum/evennia), and people on the IRC
channel who can help out just about any time of day. Also, the IRC channel has
logs as well in case you miss something.

There is information all over the place. This sometimes means there are a few
places to visit to piece together everything you may want. Or even in certain
spots that information may contradict itself. However, the quality of
documentation is very high and is one of the best features of Evennia!

With this in mind, I may reference different parts of the documentation to try
to make a single idea or task complete. There are sometimes so many ways to do
something I will draw upon separate sources.

Keep up the good work guys!

## Project Layout

Every project should start off in the right direction, and for my projects I
really like to try to stay organized. Yes, I did say "try" to stay organized.
One of the biggest messes I make for myself is by just throwing around files
here and there until my directories are a mess.  So lets define a logical file
system layout and try to stick to it.

I have decided to use the following structure.

     /home/orkim            - my home directory
     /home/orkim/<gamename> - the (unnamed-so-far) game directory
     /home/orkim/evennia    - my personal Evennia fork (more about this below)
     /home/orkim/venv       - stores all virtualenv that I use

You might have noticed I haven't named the game yet. I like putting those sorts
of things off.

## Evennia Setup
now forget that, and lets setup like a real developer. talk about forking,
cloning, and adding an upstream remote (in case I ever contribute back)

## Our Game!

I can't put this off much longer. I've got my environment setup and it's
time to start developing the game. I need to initialize a game, and for that I
must define that <gamename> directory I hinted at earlier to store all of the
game source code.

It shall be named "Treadmore" boomed a voice!

I'm going to use the `evennia` command to initialize, run migrations (set up
the database), and start the server.

Notice that I am using my "evennia" virtualenv and issuing commands in my home
directory.

    (evennia)orkim@entropy:~$ evennia --init treadmore

        Welcome to Evennia!
        Created a new Evennia game directory 'treadmore'.

        You can now optionally edit your new settings file
        at treadmore/server/conf/settings.py. If you don't, the defaults
        will work out of the box. When ready to continue, 'cd' to your
        game directory and run:

           evennia migrate

        This initializes the database. To start the server for the first
        time, run:

           evennia start

        Make sure to create a superuser when asked for it (the email can
        be blank if you want). You should now be able to (by default)
        connect to your server on 'localhost', port 4000 using a
        telnet/mud client or http://localhost:8000 using your web browser.
        If things don't work, check so those ports are open.

        
    (evennia)orkim@entropy:~$

Now I move into our game directory and run migrations to set the database up.

    (evennia)orkim@entropy:~$ cd treadmore
    (evennia)orkim@entropy:~/treadmore$ evennia migrate
    Operations to perform:
      Synchronize unmigrated apps: staticfiles, admindocs, idmapper, webclient
      Apply all migrations: help, comms, sessions, admin, typeclasses, sites, flatpages, server, players, contenttypes, objects, auth, scripts
    Synchronizing apps without migrations:
      Creating tables...
        Running deferred SQL...
      Installing custom SQL...
    Running migrations:
      Rendering model states... DONE
      Applying typeclasses.0001_initial... OK
    <snipped>
      Applying server.0001_initial... OK
      Applying sessions.0001_initial... OK
    (evennia)orkim@entropy:~/treadmore$

I'm ready to start the server up at last! Here we go!

    (evennia)orkim@entropy:~/treadmore$ evennia start

    Create a superuser below. The superuser is Player #1, the 'owner' account of the server.

    Username: orkim
    Email address: orkim@test.com
    Password: 
    Password (again):
    <snipped>

A lot more text will scroll by. What we end up with is a AMP server, a MUD
telnet server, and a HTTP server up and running.

As a bonus, the first time I launched the game I was prompted to make an
admin user. Thus, I have everything I need to log in now!

connect up. and go ahead and create a
non-admin user for testing.

pro tip - copy out the database file for quick recoveries

## Conclusion

yay! we got it all setup and running!
